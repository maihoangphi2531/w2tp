local maxGold = 99999999
local player = game:GetService("Players").LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Cáº¥u hÃ¬nh ID
local remoteIdToW2 = 19 -- ID Remote Ä‘á»ƒ sang World 2
local remoteIdToW1 = 20 -- ID Remote Ä‘á»ƒ vá» World 1
local placeIdW2 = 4310463940 -- ID Map World 2
local placeIdW1 = 4310463616 -- ID Map World 1 (NÆ¡i tráº£ vá» máº·c Ä‘á»‹nh sau kxhi tiÃªu tiá»n)

-- HÃ m láº¥y Remote Ä‘á»™ng (LuÃ´n láº¥y remote má»›i nháº¥t trÃ¡nh lá»—i)
local function getTeleportRemote()
    local Shared = ReplicatedStorage:FindFirstChild("Shared")
    local TeleportRemote = Shared and Shared:FindFirstChild("Teleport")
    return TeleportRemote and TeleportRemote:FindFirstChild("TeleportToHub")
end

-- HÃ m kiá»ƒm tra nhÃ¢n váº­t sá»‘ng
local function isAlive()
    local char = player.Character
    return char and char:FindFirstChild("Humanoid") and char.Humanoid.Health > 0
end

-- HÃ m láº¥y vÃ ng an toÃ n
local function getGoldValue()
    local success, val = pcall(function()
        return player.PlayerGui.Profile.Currency.Gold.Value
    end)
    return success and val or nil
end

-- HÃ m dá»‹ch chuyá»ƒn chung
local function teleportWithRetry(remoteId, targetPlaceId)
    local Remote = getTeleportRemote()
    if not Remote then warn("âŒ KhÃ´ng tÃ¬m tháº¥y Remote Teleport!") return end

    -- Chá»‰ thá»­ 5 láº§n rá»“i thÃ´i Ä‘á»ƒ trÃ¡nh spam
    for i = 1, 5 do
        if game.PlaceId == targetPlaceId then return true end -- ÄÃ£ tá»›i nÆ¡i
        
        if isAlive() then
            warn("ğŸ”„ Äang dá»‹ch chuyá»ƒn... (Remote: " .. remoteId .. ") - Thá»­ láº§n " .. i)
            pcall(function() Remote:FireServer(remoteId) end)
        else
            warn("âš ï¸ NhÃ¢n váº­t Ä‘Ã£ cháº¿t, Ä‘á»£i há»“i sinh...")
        end
        
        task.wait(10) -- Äá»£i 10s Ä‘á»ƒ game load map
    end
end

-- === LOGIC CHÃNH ÄÃƒ Sá»¬A ===
local function handleLogic()
    local currentGold = getGoldValue()
    local currentPlaceId = game.PlaceId

    -- Náº¿u chÆ°a load Ä‘Æ°á»£c vÃ ng thÃ¬ bá» qua vÃ²ng nÃ y
    if not currentGold then return end 

    -- TRÆ¯á»œNG Há»¢P 1: ÄANG á» WORLD 2 (NÆ¡i tiÃªu tiá»n)
    if currentPlaceId == placeIdW2 then
        if currentGold < maxGold then
            warn("âœ… VÃ ng Ä‘Ã£ giáº£m (" .. currentGold .. "). Quay vá» World 1 Ä‘á»ƒ farm tiáº¿p!")
            task.wait(3) -- Äá»£i xÃ­u cho cháº¯c
            teleportWithRetry(remoteIdToW1, placeIdW1)
        else
            -- Náº¿u vÃ ng váº«n Ä‘áº§y, script sáº½ khÃ´ng lÃ m gÃ¬ cáº£ (Ä‘á»£i báº¡n quay tÆ°á»›ng)
            warn("â³ Äang á»Ÿ World 2 - Äá»£i tiÃªu vÃ ng... (Hiá»‡n táº¡i: " .. currentGold .. ")")
        end

    -- TRÆ¯á»œNG Há»¢P 2: ÄANG á» Báº¤T Ká»² ÄÃ‚U KHÃC (World 1, World 3, Event, v.v...)
    else
        if currentGold >= maxGold then
            warn("ğŸ’° PhÃ¡t hiá»‡n vÃ ng Ä‘áº§y (" .. currentGold .. ") táº¡i Map ID: " .. currentPlaceId)
            warn("ğŸš€ Báº¯t Ä‘áº§u dá»‹ch chuyá»ƒn sang World 2...")
            teleportWithRetry(remoteIdToW2, placeIdW2)
        else
            -- VÃ ng chÆ°a Ä‘áº§y, á»Ÿ yÃªn farm tiáº¿p
            -- warn("â›ï¸ Äang farm... VÃ ng hiá»‡n táº¡i: " .. currentGold)
        end
    end
end

-- VÃ²ng láº·p cháº¡y vÄ©nh cá»­u
warn("ğŸš€ Script Auto: Check táº¥t cáº£ World Ä‘Ã£ cháº¡y!")
while true do
    pcall(handleLogic)
    task.wait(5) -- Kiá»ƒm tra má»—i 5 giÃ¢y
end
